#!/bin/bash -e
# shellcheck source=lib/all.bash
. "${taito_plugin_path:?}/lib/all.bash"

taito::confirm "Save newly created secrets to Kubernetes" || \
  taito::skip_to_next "${@}"

kubectl::use_context
kubectl::ensure_namespace "${taito_namespace:?}"

kubectl::use_context
export kubernetes_skip_restart="true"
kubectl::save_secrets
export kubernetes_skip_restart="false"

taito::call_next "${@}"
