# Quick start

In this example we use Google Cloud.

> NOTE: Taito-cli is still work in progress. Not all steps work yet.

## Initial preparations

1. Create a Google Cloud account.

2. Create a billing account on Google Cloud.

3. Install taito-cli.

## Create a taito zone in Google Cloud

TODO OPTIONAL: first setup remote state for terraform

1. Configure `taito_zone` and `gcloud_org_id` in the `zone-gcloud/taito-config.sh` file. (TODO configure all places that say...) (TODO installing without organization?)

2. Authenticate by running `taito --auth` in the `zone-gcloud` directory.

3. Create taito zone by running `taito zone apply` in the `zone-gcloud` directory.

4. TODO change postgres user password afterwards or provide it with google_sql_user? tfstate contains some generated passwords and certificates that should be protected anyway! --> TODO: Add note that no need to commit if you don't want to manage state with terraform.

TODO: LoadBalancer IP:
- check google load balancer IP and set DNS record: *.mydomain.com
- make IP permanent: VPC Network -> External IP Addresses -> Ephemeral>Static

TODO: CI/CD cannot pull taito-cli image from another zone -> use docker hub in all examples
TODO: Check TODOs of 'zone apply' command implementations.

The newly created zone includes:

* Kubernetes cluster for applications
* Postgres cluster for data
* Storage for serving static resources
* Container registry and builder for CI/CD
* Stackdriver for logging and monitoring
* Google Functions and pubsub for events/notifications

## Create a project and deploy it to the taito zone

1. Create a new project by running `taito template create: server-template` and follow instructions.

2. Run `taito project apply` in the project directory. TODO sentry

3. Create dev and prod environments for the project by running `taito env apply:dev` and `taito env apply:prod` in the project directory. This will TODO:

4. Start local development by running: `taito install`, `taito start`, `taito init` and `taito open app`.

5. Push a change in the dev branch and it will be deployed on your Kubernetes cluster running on Google Cloud as a development version. You can open it on browser by running `taito open app:dev`.

6. Merge the change in the master branch and it will be deployed on your Kubernetes cluster running on Google Cloud as a production version. You can open it on browser by running `taito open app:prod`.

Hooray! You are now running your app in production with all the bells and whistles like multiple environments, automatic deployments, deployment versioning and reversions, data migrations, autogenerated release notes, autogenerated ssl certificates, secret rotation, error tracking, uptime monitoring, log analytics, backups, autoscaling, and high availability. Nevertheless, almost anyone is able to operate it using the easy-to-use command set provided by the `taito-cli`. You can also easily move it to any cloud service provider, or alternatively host it on your own dedicated servers. And all the same taito-cli commands still work as they should.

> TODO canary releases, content delivery network, performance monitoring.

## Running on some other infrastructure

Want to run software on some other infrastructure than Google Cloud and Kubernetes? Please contribute by developing taito-cli plugins for the infrastructure in question.

## Create an custom extension

TODO instructions

## Miscellaneous tips

See taito-cli commands by running `taito -h`.
